<div class="users-new-wrapper">
  <div class="container">
    <div class="row">
      <div class="col-md-offset-4 col-md-4 users-new-container">
        <h1 class="text-center text-white">ユーザ登録</h1>
        <%= form_for @user do |f| %>
          <div class="form-group" id="userid_form">
            <%= f.label :ユーザID,"ユーザID", class: 'text-white' %>
            <%= f.text_field :userid, class: 'form-control' %>
              <% if @user.errors.include?(:userid) %>
                <p style="color: red;"><%= @user.errors.full_messages_for(:userid).first %>
              <% end %>
            <p class="tip">ユーザIDは10文字以内/英数半角文字のみ</p>
          </div>
          <div class="form-group">
            <%= f.label :パスワード, class: 'text-white' %>
            <%= f.password_field :password, class: 'form-control' %>
              <% if @user.errors.include?(:password) %>
                <p style="color: red;"><%= @user.errors.full_messages_for(:password).first %>
              <% end %>
            <p class="tip">パスワードは8~32文字/英数半角文字の混在のみ</p>
          </div>
          <div class="form-group">
            <%= f.label :title,"パスワード(確認用)", class: 'text-white' %>
            <%= f.password_field :password_confirmation, class: 'form-control' %>
              <% if @user.errors.include?(:password_confirmation) %>
                <p style="color: red;"><%= @user.errors.full_messages_for(:password_confirmation).first %>
              <% end %>
            <p class="tip">パスワードは8~32文字/英数半角文字の混在のみ</p>
          </div>
          <div class="form-group">
            <%= f.label :ニックネーム, class: 'text-white' %>
            <%= f.text_field :name, class: 'form-control' %>
              <% if @user.errors.include?(:name) %>
                <p style="color: red;"><%= @user.errors.full_messages_for(:name).first %>
              <% end %>
            <p class="tip">ニックネームは15文字以内</p>
          </div>
          <div class="form-group">
            <%= f.label :メールアドレス, class: 'text-white' %>
            <%= f.text_field :email, class: 'form-control' %>
              <% if @user.errors.include?(:email) %>
                <p style="color: red;"><%= @user.errors.full_messages_for(:email).first %>
              <% end %>
          </div>
          <div class="form-group">
            <%= f.label :最寄駅, class: 'text-white'%>
            <%= f.text_field :station, class: 'form-control' ,id: 'stasion_name' %>
          </div>
          <%= f.submit "登録", class: 'btn-block btn-white' %>
        <% end %>
        <%= link_to 'ログインはこちら', login_path,class: 'text-white' %>
      </div>
    </div>
  </div>
</div>

  <script>
  $( function() {
    $( "#stasion_name" ).autocomplete({
      autoFocus: true,
      source: "/users/users/auto_complete.json",
      minLength: 1,
    });

    $('.tip').hide();
    $('.form-group').hover(
    function () {
        $(this).children('.tip').fadeIn('fast');
    },
    function () {
        $(this).children('.tip').fadeOut('fast');
    });

    //入力値に"駅"が含まれなければ追加する。
    document.getElementById('new_user').onsubmit = function() {
      let inputAddress = document.getElementById('stasion_name').value;
      if (inputAddress.indexOf('駅') == -1) {
        inputAddress = inputAddress + '駅';
        document.getElementById('stasion_name').value = inputAddress;
      }
    }
  });
  </script>